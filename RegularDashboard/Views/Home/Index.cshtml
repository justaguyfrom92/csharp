@model DashboardViewModel
@{
    ViewData["Title"] = "Overview";
    int trafficMax = Model.WeeklyTraffic.Max(t => t.Value);
}

<div class="page-header">
  <div>
    <h1>Overview</h1>
    <p>Live dashboard powered by SignalR</p>
  </div>
  <button id="toggleBtn" onclick="toggle()">
    <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <path d="M3 12h18M3 6h18M3 18h18"/>
    </svg>
    <span id="btnLabel">Hide Section</span>
  </button>
</div>

<!-- Stat Cards -->
<div class="stats-grid">
  @foreach (var card in Model.StatCards)
  {
    <div class="stat-card">
      <div class="label">@card.Label</div>
      <div class="value">@card.Value</div>
      <div class="delta @(card.IsPositive ? "up" : "down")">@card.Delta</div>
    </div>
  }
</div>

<!-- Collapsible Section -->
<div class="collapsible-wrapper @(Model.SectionVisible ? "" : "hidden")" id="collapsible">
  <div class="two-col">

    <!-- Bar Chart -->
    <div class="section-card">
      <h2>Weekly Traffic</h2>
      <div class="chart">
        @foreach (var bar in Model.WeeklyTraffic)
        {
          double pct = (double)bar.Value / trafficMax * 100;
          <div class="bar-col">
            <div class="bar" style="height:@(pct.ToString("F1"))%"></div>
            <span class="bar-label">@bar.Day</span>
          </div>
        }
      </div>
    </div>

    <!-- Activity Feed -->
    <div class="section-card">
      <h2>Recent Activity</h2>
      <div class="activity-list">
        @foreach (var item in Model.RecentActivity)
        {
          <div class="activity-item">
            <div class="activity-dot" style="background:@item.Color"></div>
            <span>@Html.Raw(item.Description)</span>
            <span class="activity-time">@item.TimeAgo</span>
          </div>
        }
      </div>
    </div>

  </div>
</div>

<div id="statusBar">Connecting to SignalRâ€¦</div>
